<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>SmartSnippets DA1468x SDK: BLE ANCS Client demo application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SmartSnippets DA1468x SDK
   &#160;<span id="projectnumber">Version 1.0.6.968</span>
   </div>
   <div id="projectbrief">Bluetooth Smart</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">BLE ANCS Client demo application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p>This application is sample implementation for Apple Notification Center Service (ANCS) client. It supports all features of Notification Consumer (NC) role provided by this service.</p>
<h2>Installation procedure</h2>
<p>The project is located in the <b><code>projects/dk_apps/ble_profiles/ancs</code></b> folder.</p>
<p>To install the project follow the <a class="el" href="install_and_debug_procedure.html">General Installation and Debugging Procedure</a>.</p>
<h2>Suggested configurable parameters</h2>
<h3>Drop preexisting notifications</h3>
<p>Upon connection iOS device sends all pending notifications. By default all of them are processed by application. To drop notification events that were present before device connected set the following configuration macro to 1.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define CFG_DROP_PREEXISTING_NOTIFICATIONS      (0)</span></div>
</div><!-- fragment --><h3>Verbose logging</h3>
<p>By default, application will only print incoming notification once all data (attributes, application) are received. Verbose logging will enable more printouts for intermediate steps as they are being executed, i.e. received notification information, reading attributes etc.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define CFG_VERBOSE_LOG (0)</span></div>
</div><!-- fragment --><h3>Maximum length for "title" and "message" attributes</h3>
<p>This configures maximum number of characters to be received for "title" and "message" attributes of notification. It affects what is displayed as contents of notification.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define CFG_TITLE_ATTRIBUTE_MAXLEN      (25)</span></div>
<div class="line"><span class="preprocessor">#define CFG_MESSAGE_ATTRIBUTE_MAXLEN    (75)</span></div>
</div><!-- fragment --><h3>GPIO for K1 button</h3>
<p>K1 button is used to trigger performing negative action on most recently received notification. See testing section for details.</p>
<p>Default value is suitable when running on ProDK rev. B and C</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define CFG_TRIGGER_PERFORM_NOTIF_ACTION_GPIO_PORT   (HW_GPIO_PORT_1)</span></div>
<div class="line"><span class="preprocessor">#define CFG_TRIGGER_PERFORM_NOTIF_ACTION_GPIO_PIN    (HW_GPIO_PIN_6)</span></div>
</div><!-- fragment --><h3>Request timeout</h3>
<p>Requests (either application or notification attributes) which take too long will be cancelled automatically after specified time.</p>
<p>Default value is 10 seconds.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define CFG_REQUEST_TIMEOUT_MS  (10000)</span></div>
</div><!-- fragment --><h3>Browse delay</h3>
<p>Short delay is used before starting browse for ANCS.</p>
<p>Default value is 1 second.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define CFG_BROWSE_DELAY_MS  (1000)</span></div>
</div><!-- fragment --><h2>Manual testing</h2>
<p>Application runs as Notification Consumer, thus it uses LE Peripheral role when started and starts advertising. Advertising data contains Service Solicitation UUID for ANCS as defined by specification (<em>7905f431-b5ce-4e99-a40f-4b1e122d00d0</em>) and device name (<em>Dialog ANCS Demo</em>) is located in scan response.</p>
<p>Debug logs are output using serial port available when plafrom is connected to PC using USB2 connector (e.g. <code>/dev/ttyUSB0</code>).</p>
<ol type="1">
<li>Use iOS device for scan for devices and connect to <em>Dialog ANCS Demo</em>.</li>
<li>Due to security requirements of ANCS pairing will be triggered and should be accepted.</li>
<li>Once connected, any notification which already exist on iOS device will be retrieved and printed in logs.</li>
<li>Any new notification on iOS device will be retrieved and printed in logs from now on. Notifications can be created using various apps like Mail, Reminders, Calendars and many others.</li>
<li>K1 button can be used to perform so-called negative action on most recently received notification. This usually means that notification will be removed, but it depends on contents of notification.</li>
</ol>
<p>Notification is printed in following form:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Notification from Reminders (com.apple.reminders)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        Category: Schedule</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;            Date: 20160127T125500</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;           Title: Reminder</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;         Message: sample reminder</div>
</div><!-- fragment --><p>All data are printed as received from iOS device, no additional processing is applied.</p>
<p>If verbose logging is enabled, some additional information will be also printed like "raw" events received from iOS device.</p>
<h2>Known limitations</h2>
<p>MTU values, connection parameters and device name are hardcoded at the moment, they can only be modified by making changes in source code. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 22 2016 19:41:08 for SmartSnippets DA1468x SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
